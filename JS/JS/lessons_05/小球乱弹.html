<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        #wrap {
            width: 1000px;
            height: 500px;
            position: relative;
            /* border: 10px solid green; */
            margin: 0 auto;
        }

        #ball {
            width: 50px;
            height: 50px;
            background: red;
            position: absolute;
            left: 0;
            top: 0;
            text-align: center;
            line-height: 50px;
            color: #fff;
            font-size: 25px;
            border-radius: 50%;
            box-shadow: 1px 2px 4px 3px black;
        }
    </style>
</head>

<body>
    <div id="wrap">
        <div id="ball">
            ğŸ˜„
        </div>
    </div>
</body>
<script>
    // è·å–wrapï¼Œç”¨æ¥è·å–ä»–çš„å®½
    var wrap = document.getElementById('wrap');
    // è·å–ballï¼Œç”¨æ¥è·å–å®ƒçš„å®½å’Œåç§»é‡
    var ball = document.getElementById('ball');
    // å£°æ˜æ°´å¹³é€Ÿåº¦å˜é‡
    var v1 = 5;
    //å£°æ˜å‚ç›´é€Ÿåº¦å˜é‡
    var v2 = 4;
    // è®¾ç½®ç‚¹å‡»äº‹ä»¶çš„æ¡ä»¶
    var timer = null;
    // ç»™wrapç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œæ¥è®©å°çƒæ»šåŠ¨
    wrap.onclick = function () {
        if (!timer) {//è¿›å…¥åˆ¤æ–­æ¡ä»¶æ¥æ§åˆ¶ç‚¹å‡»ä¹‹åæ— æ³•ç‚¹å‡»
            //ç»™å˜é‡èµ‹å€¼è®¡æ—¶å™¨
            timer = setInterval(move, 20);
        }
    }
    // ç¢°æ’å‡½æ•°
    function move() {
        var r = Math.floor(Math.random()*256),
        g = Math.floor(Math.random()*256),
        b = Math.floor(Math.random()*256);
        // å£°æ˜æ°´å¹³ç§»åŠ¨çš„å˜é‡
        var n = ball.offsetLeft + v1;
        // å£°æ˜å‚ç›´æ–¹å‘ç§»åŠ¨çš„å˜é‡
        var m = ball.offsetTop + v2;
        // å°çƒæ°´å¹³ç§»åŠ¨
        // ball.style.left = n + 'px';
        // å°çƒå‚ç›´ç§»åŠ¨
        // ball.style.top = m + 'px';
        ball.style.transform = 'rotateZ('+n+'deg)';
        // åˆ¤æ–­æ°´å¹³æ–¹å‘å‘å³æ˜¯å¦è¶…å‡ºæŒ‡å®šåŒºåŸŸ
        if (n >= wrap.clientWidth - ball.clientWidth) {
            n = wrap.clientWidth - ball.clientWidth;
            ball.style.backgroundColor = 'rgb('+r+','+g+','+b+')';
            ball.style.width = g + 'px';
            ball.style.height = g + 'px';
            ball.style.lineHeight = g + 'px';
            ball.innerHTML = r;
            v1 = Math.round(Math.random()*25+5);
            v1 *= -1;
        }
        // åˆ¤æ–­æ°´å¹³æ–¹å‘å‘å·¦æ˜¯å¦è¶…å‡ºæŒ‡å®šåŒºåŸŸ
        if (n <= 0) {
            n = 0;
            ball.style.backgroundColor = 'rgb('+r+','+g+','+b+')';
            v1 = Math.round(Math.random()*25+5);
            ball.style.width = b + 'px';
            ball.style.height = b + 'px';
            ball.style.lineHeight = b + 'px';
            ball.innerHTML = r;
        }
        // åˆ¤æ–­å‚ç›´å‘ä¸‹æ˜¯å¦è¶…å‡ºæŒ‡å®šåŒºåŸŸ
        if (m >= wrap.clientHeight - ball.clientHeight) {
            m = wrap.clientHeight - ball.clientHeight;
            ball.style.backgroundColor = 'rgb('+r+','+g+','+b+')';
            v2= Math.round(Math.random()*25+5);
            ball.style.width = g + 'px';
            ball.style.height = g + 'px';
            ball.style.lineHeight = g + 'px';
            ball.innerHTML = r;
            v2 *= -1;
        }
        // åˆ¤æ–­å‚ç›´å‘ä¸Šæ˜¯å¦è¶…å‡ºæŒ‡å®šåŒºåŸŸ
        if (m < 0) {
            m = 0;
            v2 = Math.round(Math.random()*25+5);
            ball.style.backgroundColor = 'rgb('+r+','+g+','+b+')';
            ball.style.width = r + 'px';
            ball.style.height = r + 'px';
            ball.style.lineHeight = r + 'px';
            ball.innerHTML = r;
        }
        ball.style.left = n + 'px';
        ball.style.top = m + 'px';
    }
</script>

</html>