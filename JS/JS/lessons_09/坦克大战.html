<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        body,html{
            margin:0;
        }
        img {
            position: absolute;
            width: 60px;
            height: 60px;
            display:block;
        }
    </style>
</head>

<body>
    <img src="img/u.gif" alt="">
</body>
<script>
    var img = document.querySelector('img');//图片
    var w = document.documentElement.clientWidth - img.clientWidth;//视窗宽度-图片宽度
    var h = document.documentElement.clientHeight - img.clientHeight;//视窗高度-图片高度
    console.log(document.documentElement.clientWidth,img.clientWidth)
    var n = rn(0, w);
    var m = rn(0, h);
    img.style.left = n + 'px';
    img.style.top = m + 'px';
    function rn(x, y) {
        return Math.floor(Math.random() * (y - x + 1) + x);
    }
    document.onkeydown = function (event) {
        var e = event || window.event;
        var z = e.keyCode;
        var char = String.fromCharCode(z);
        var top = img.offsetTop;
        var left = img.offsetLeft;
        if (char == '&') {
            setTimeout(function () {
                img.src = 'img/u.gif';
            }, 20)
            if (img.offsetTop > 0) {
                top -= 5;
                img.style.top = top + 'px';
            }
        }
        if (char == '(') {
            setTimeout(function () {
                img.src = 'img/d.gif';
            }, 20)
            if (img.offsetTop <= h) {
                top += 5;
                img.style.top = top + 'px';
            }
        }
        if (char == '%') {
            setTimeout(function () {
                img.src = 'img/l.gif';
            }, 20)

            if (img.offsetLeft > 0) {
                left -= 5;
                img.style.left = left + 'px';
            }
        }

        // 右
        if (char == "'") {
            setTimeout(function () {
                img.src = 'img/r.gif';
            }, 20)
            if (img.offsetLeft+img.clientWidth >= w) {
                left += 5;
                img.style.left = w + 'px';
            }
        }
    }


</script>

</html>